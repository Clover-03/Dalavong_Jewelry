const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();

async function main() {
  console.log('ðŸŒ± à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹ƒà¸ªà¹ˆà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡...');

  try {
    // à¸¥à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¹ˆà¸²à¸à¹ˆà¸­à¸™ (à¸–à¹‰à¸²à¸¡à¸µ)
    console.log('ðŸ§¹ à¸¥à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¹ˆà¸²...');
    await prisma.tb_Sell.deleteMany();
    await prisma.tb_Exchange.deleteMany();
    await prisma.tb_Repurchase.deleteMany();
    await prisma.tb_Product.deleteMany();
    await prisma.tb_Customer.deleteMany();
    await prisma.tb_Supplier.deleteMany();
    await prisma.tb_Price.deleteMany();

    // à¸£à¸µà¹€à¸‹à¹‡à¸• Auto Increment à¹€à¸›à¹‡à¸™ 1
    console.log('ðŸ”„ à¸£à¸µà¹€à¸‹à¹‡à¸• Auto Increment...');
    await prisma.$executeRaw`ALTER TABLE Tb_Price AUTO_INCREMENT = 1`;
    await prisma.$executeRaw`ALTER TABLE Tb_Customer AUTO_INCREMENT = 1`;
    await prisma.$executeRaw`ALTER TABLE Tb_Supplier AUTO_INCREMENT = 1`;
    await prisma.$executeRaw`ALTER TABLE Tb_Product AUTO_INCREMENT = 1`;
    await prisma.$executeRaw`ALTER TABLE Tb_Sell AUTO_INCREMENT = 1`;
    await prisma.$executeRaw`ALTER TABLE Tb_Exchange AUTO_INCREMENT = 1`;
    await prisma.$executeRaw`ALTER TABLE Tb_Repurchase AUTO_INCREMENT = 1`;

    // 1. à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸²à¸„à¸²à¸—à¸­à¸‡
    console.log('ðŸ’° à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸²à¸„à¸²à¸—à¸­à¸‡...');
    const goldPrice = await prisma.tb_Price.create({
      data: {
        Date: new Date(),
        Buy_price: 2850000,  // 2,850,000 LAK à¸•à¹ˆà¸­à¸šà¸²à¸—
        Sell_price: 2900000  // 2,900,000 LAK à¸•à¹ˆà¸­à¸šà¸²à¸—
      }
    });

    // 2. à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸² (15 à¸£à¸²à¸¢à¸à¸²à¸£)
    console.log('ðŸ‘¥ à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²...');
    const customers = [
      { name: 'àº™àº²àº‡ àºªàº»àº¡àºˆàº´àº” àº§àº»àº‡àº”àº²àº§', phone: '020-55559999', address: 'àºšà»‰àº²àº™ à»œàº­àº‡àº”àº§àº‡, à»€àº¡àº·àº­àº‡ àºªàºµà»‚àº„àº”, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº—à»‰àº²àº§ àºšàº¸àº™àº¡àºµ à»àºªàº‡àºªàº¸àº§àº±àº™', phone: '020-77778888', address: 'àºšà»‰àº²àº™ àº—à»ˆàº²à»€àº®àº·àº­, à»€àº¡àº·àº­àº‡ àºˆàº±àº™àº—àº°àºšàº¹àº¥àºµ, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº™àº²àº‡ àº„àº³àºœàº­àº‡ àº¥àº²àº§àº‡àº²àº¡', phone: '020-99996666', address: 'àºšà»‰àº²àº™ àº”àº­àº™àº™àº­àº, à»€àº¡àº·àº­àº‡ àºªàºµàºªàº±àº”àº•àº°àº™àº²àº, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº—à»‰àº²àº§ àº§àº´à»„àº¥ àºžàº»àº¡àº¡àº°àº§àº»àº‡', phone: '020-44445555', address: 'àºšà»‰àº²àº™ àº™àº²à»€àºŠàº»àº², à»€àº¡àº·àº­àº‡ àºªàºµà»‚àº„àº”, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº™àº²àº‡ àºªàºµàº¥àº²àº§àº±àº™ àº¡àº°àº™àºµàº§àº»àº‡', phone: '020-33334444', address: 'àºšà»‰àº²àº™ àº«àº²àº”àºŠàº²àº, à»€àº¡àº·àº­àº‡ àº«àº²àº”àºŠàº²àº, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº—à»‰àº²àº§ àºšàº¸àº™àº—àº±àº™ àºªàº¸àºàºªàº»àº¡àºšàº¹àº™', phone: '020-22223333', address: 'àºšà»‰àº²àº™ àºžàº½àº‡àº”àº´àº™, à»€àº¡àº·àº­àº‡ àºˆàº±àº™àº—àº°àºšàº¹àº¥àºµ, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº™àº²àº‡ àº”àº²àº§àº”àº§àº‡ à»àºà»‰àº§àº¡àº°àº™àºµ', phone: '020-88889999', address: 'àºšà»‰àº²àº™ àº§àº±àº”àº•àº°à»œà»‰àº², à»€àº¡àº·àº­àº‡ àºªàºµàºªàº±àº”àº•àº°àº™àº²àº, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº—à»‰àº²àº§ àºªàº´àº‡à»‚àº• àº„àº³àºžàº¹àº¡', phone: '020-66667777', address: 'àºšà»‰àº²àº™ à»‚àº™àº™àº¡àºµà»ƒàº«àºà»ˆ, à»€àº¡àº·àº­àº‡ àº›àº²àºàº‡àº·à»ˆàº¡, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº™àº²àº‡ àº­àº²àº™àº¸àºªàº­àº™ àº§àº±àº™àº”àºµ', phone: '020-11112222', address: 'àºšà»‰àº²àº™ àº”àº»àº‡àº¡àº°à»„àºŸ, à»€àº¡àº·àº­àº‡ àºªàº½àº‚àº­àº”, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº—à»‰àº²àº§ àº¡àº°à»‚àº™ àº¥àº²àºŠàº²àº§àº»àº‡', phone: '020-55556666', address: 'àºšà»‰àº²àº™ àº«à»‰àº§àºàºªàº²àº, à»€àº¡àº·àº­àº‡ àº«àºµàº™à»€àº«àºµàºš, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº™àº²àº‡ àºžàº±àº™àº—àº´àºš à»àºªàº‡àº­àº²àº¥àº¸àº™', phone: '020-99998888', address: 'àºšà»‰àº²àº™ à»àºà»‰àº§àº™àº¹àº™, à»€àº¡àº·àº­àº‡ àºˆàº±àº™àº—àº°àºšàº¹àº¥àºµ, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº—à»‰àº²àº§ àºšàº¸àº™à»€àº®àº·àº­àº‡ àº¡àº°àº¥àº´àº§àº±àº™', phone: '020-44447777', address: 'àºšà»‰àº²àº™ àº«àº²àº”àº—àº²àº”, à»€àº¡àº·àº­àº‡ àº«àº²àº”àºŠàº²àº, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº™àº²àº‡ àº¥àº±àº”àº”àº² àºˆàº±àº™àº”àº²àº§àº»àº‡', phone: '020-33335555', address: 'àºšà»‰àº²àº™ àº—à»ˆàº²à»ƒàº™, à»€àº¡àº·àº­àº‡ àºªàºµà»‚àº„àº”, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº—à»‰àº²àº§ à»€àº”àº” àº§àº»àº‡àºªàº°àº«àº§àº±àº™', phone: '020-77779999', address: 'àºšà»‰àº²àº™ àº›àº²àºà»€àºŠ, à»€àº¡àº·àº­àº‡ àº›àº²àºàº‡àº·à»ˆàº¡, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº™àº²àº‡ àº¡àº¸àºàº”àº² àºªàºµàº—àº­àº‡', phone: '020-66668888', address: 'àºšà»‰àº²àº™ àº”àº»àº‡àº™àº²àº—àº­àº‡, à»€àº¡àº·àº­àº‡ àºªàº½àº‚àº­àº”, àº§àº½àº‡àºˆàº±àº™' }
    ];

    for (const customer of customers) {
      await prisma.tb_Customer.create({
        data: {
          Cust_name: customer.name,
          Phone: customer.phone,
          Address: customer.address
        }
      });
    }

    // 3. à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸ªà¹ˆà¸‡à¸ªà¸´à¸™à¸„à¹‰à¸² (15 à¸£à¸²à¸¢à¸à¸²à¸£)
    console.log('ðŸšš à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸ªà¹ˆà¸‡à¸ªà¸´à¸™à¸„à¹‰à¸²...');
    const suppliers = [
      { name: 'àºšà»àº¥àº´àºªàº±àº” àº—àº­àº‡àº„àº³ àº¥àº²àº§ àºˆàº³àºàº±àº”', phone: '021-123456', address: 'àºšà»‰àº²àº™ à»‚àº„àºàº‚à»ˆàº²àº‡, à»€àº¡àº·àº­àº‡ àºªàºµà»‚àº„àº”, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº®à»‰àº²àº™ àºªàºµàº—àº­àº‡ àº¡àº°àº™àºµà»àºà»‰àº§', phone: '021-234567', address: 'àºšà»‰àº²àº™ àº”àº­àº™àº¡àºµà»ƒàº«àºà»ˆ, à»€àº¡àº·àº­àº‡ àºˆàº±àº™àº—àº°àºšàº¹àº¥àºµ, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº§àº´àºªàº²àº«àº°àºàº´àº” à»àºà»‰àº§àº—àº­àº‡', phone: '021-345678', address: 'àºšà»‰àº²àº™ àº™àº²à»€àºŠàº»àº², à»€àº¡àº·àº­àº‡ àºªàºµàºªàº±àº”àº•àº°àº™àº²àº, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àºšà»àº¥àº´àºªàº±àº” àº¡àº°àº™àºµàº„àº³ àºˆàº³àºàº±àº”', phone: '021-456789', address: 'àºšà»‰àº²àº™ àº—à»ˆàº²à»€àº®àº·àº­, à»€àº¡àº·àº­àº‡ àº«àº²àº”àºŠàº²àº, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº®à»‰àº²àº™ àº”àº²àº§àº—àº­àº‡ àºàº´àº•àº•àº´àº„àº¸àº™', phone: '021-567890', address: 'àºšà»‰àº²àº™ àº«à»‰àº§àºàºªàº²àº, à»€àº¡àº·àº­àº‡ àº›àº²àºàº‡àº·à»ˆàº¡, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'à»‚àº®àº‡àº‡àº²àº™ àº¥àº²àº§àº°àº—àº­àº‡', phone: '021-678901', address: 'àºšà»‰àº²àº™ à»‚àº™àº™àº¡àºµàº«àº™à»‰àº­àº, à»€àº¡àº·àº­àº‡ àºªàº½àº‚àº­àº”, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº§àº´àºªàº²àº«àº°àºàº´àº” àº„àº³àº¥àº²àº§', phone: '021-789012', address: 'àºšà»‰àº²àº™ àº§àº±àº”àº•àº°à»œà»‰àº², à»€àº¡àº·àº­àº‡ àº«àºµàº™à»€àº«àºµàºš, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àºšà»àº¥àº´àºªàº±àº” àº—àº­àº‡à»àº”àº‡ àºˆàº³àºàº±àº”', phone: '021-890123', address: 'àºšà»‰àº²àº™ àº”àº»àº‡àº¡àº°à»„àºŸ, à»€àº¡àº·àº­àº‡ àºªàºµà»‚àº„àº”, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº®à»‰àº²àº™ àº¡àº°àº™àºµàº„àº³ àº¥àº²àº§', phone: '021-901234', address: 'àºšà»‰àº²àº™ à»àºà»‰àº§àº™àº¹àº™, à»€àº¡àº·àº­àº‡ àºˆàº±àº™àº—àº°àºšàº¹àº¥àºµ, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº§àº´àºªàº²àº«àº°àºàº´àº” àºªàºµàº—àº­àº‡àº¥àº²àº§', phone: '021-012345', address: 'àºšà»‰àº²àº™ àº›àº²àºà»€àºŠ, à»€àº¡àº·àº­àº‡ àºªàºµàºªàº±àº”àº•àº°àº™àº²àº, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'à»‚àº®àº‡àº‡àº²àº™ à»àºà»‰àº§àº¡àº°àº™àºµ', phone: '021-112233', address: 'àºšà»‰àº²àº™ àº«àº²àº”àºŠàº²àº, à»€àº¡àº·àº­àº‡ àº«àº²àº”àºŠàº²àº, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àºšà»àº¥àº´àºªàº±àº” àº—àº­àº‡àº„àº³àº”àº²àº§ àºˆàº³àºàº±àº”', phone: '021-223344', address: 'àºšà»‰àº²àº™ àº—à»ˆàº²à»ƒàº™, à»€àº¡àº·àº­àº‡ àº›àº²àºàº‡àº·à»ˆàº¡, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº®à»‰àº²àº™ àº¥àº²àº§à»€àºàºµàº” àº—àº­àº‡àº„àº³', phone: '021-334455', address: 'àºšà»‰àº²àº™ àº”àº»àº‡àº™àº²àº—àº­àº‡, à»€àº¡àº·àº­àº‡ àºªàº½àº‚àº­àº”, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àº§àº´àºªàº²àº«àº°àºàº´àº” àº¡àº°àº™àºµàº—àº­àº‡', phone: '021-445566', address: 'àºšà»‰àº²àº™ à»œàº­àº‡àº”àº§àº‡, à»€àº¡àº·àº­àº‡ àº«àºµàº™à»€àº«àºµàºš, àº§àº½àº‡àºˆàº±àº™' },
      { name: 'àºšà»àº¥àº´àºªàº±àº” àº„àº³àº›àº°àº—àºµàºš àºˆàº³àºàº±àº”', phone: '021-556677', address: 'àºšà»‰àº²àº™ àº«àº²àº”àº—àº²àº”, à»€àº¡àº·àº­àº‡ àºªàºµà»‚àº„àº”, àº§àº½àº‡àºˆàº±àº™' }
    ];

    for (const supplier of suppliers) {
      await prisma.tb_Supplier.create({
        data: {
          Sup_name: supplier.name,
          Phone: supplier.phone,
          Address: supplier.address
        }
      });
    }

    // 4. à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸´à¸™à¸„à¹‰à¸² (20 à¸Šà¸´à¹‰à¸™)
    console.log('ðŸ’ à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸´à¸™à¸„à¹‰à¸²...');
    const products = [
      { name: 'à»àº«àº§àº™', type: 'àº¥àº²àºàº¡àº±àº‡àºàº­àº™', weight: 5.50, pattern: 580000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àºªà»‰àº­àºàº„à»', type: 'àº¥àº²àºàº”àº­àºà»„àº¡à»‰', weight: 12.30, pattern: 1250000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àº•àº¸à»‰àº¡àº«àº¹', type: 'àº¥àº²àºàº§àº»àº‡àºàº»àº¡', weight: 3.20, pattern: 320000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'à»àº«àº§àº™', type: 'àº¥àº²àºà»€àº›àº±àº”', weight: 4.80, pattern: 485000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àºªàº²àºà»àº‚àº™', type: 'àº¥àº²àºàº‡àº¹', weight: 8.75, pattern: 880000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àº®àº¹àºšàº™àº»àº', type: 'àºˆàº´à»‰', weight: 2.10, pattern: 210000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'à»àº«àº§àº™', type: 'àº¥àº²àºàº”àº²àº§', weight: 6.20, pattern: 625000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àºªà»‰àº­àºàº„à»', type: 'àº¥àº²àºà»‚àºŠà»‰', weight: 15.40, pattern: 1550000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àº•àº¸à»‰àº¡àº«àº¹', type: 'àº¥àº²àºà»„àº‚à»ˆàº¡àº¸àº', weight: 2.80, pattern: 285000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'à»àº«àº§àº™', type: 'àº¥àº²àºàºšàº»àº§', weight: 5.10, pattern: 515000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àºªàº²àºà»àº‚àº™', type: 'àº¥àº²àºàº”àº­àºàºàº¸àº«àº¥àº²àºš', weight: 9.60, pattern: 965000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àº®àº¹àºšàº«àº»àº§à»ƒàºˆ', type: 'àºˆàº´à»‰', weight: 1.90, pattern: 195000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'à»àº«àº§àº™', type: 'àº¥àº²àºà»àº²àºà»„àº¡à»‰', weight: 4.50, pattern: 455000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àºªà»‰àº­àºàº„à»', type: 'àº¥àº²àºàº¢àº¹à»ˆàº”àºµ', weight: 11.20, pattern: 1125000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àº•àº¸à»‰àº¡àº«àº¹', type: 'àº¥àº²àºà»„àºœà»ˆ', weight: 3.60, pattern: 365000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'à»àº«àº§àº™', type: 'àº¥àº²àºàº­àº´àº™à»‚àº”', weight: 7.30, pattern: 735000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àºªàº²àºà»àº‚àº™', type: 'àº¥àº²àºà»àºà»‰àº§', weight: 10.80, pattern: 1085000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àº®àº¹àºšàº”àº§àº‡àºˆàº±àº™', type: 'àºˆàº´à»‰', weight: 2.40, pattern: 245000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'à»àº«àº§àº™', type: 'àº¥àº²àºàºàº°àº¥àº²àºªàºµ', weight: 5.90, pattern: 595000, status: 'AVAILABLE', condition: 'GOOD' },
      { name: 'àºªà»‰àº­àºàº„à»', type: 'àº¥àº²àºàº¡àº°àºàº­àº', weight: 13.70, pattern: 1375000, status: 'AVAILABLE', condition: 'GOOD' }
    ];

    for (const product of products) {
      await prisma.tb_Product.create({
        data: {
          Price_ID: goldPrice.Price_ID,
          Pd_name: product.name,
          Type: product.type,
          Weight: product.weight,
          Pattern_value: product.pattern,
          status: product.status,
          condition: product.condition
        }
      });
    }

    console.log('âœ… à¹ƒà¸ªà¹ˆà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™!');
    console.log(`ðŸ“Š à¸ªà¸£à¸¸à¸›à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡:`);
    console.log(`   ðŸ’° à¸£à¸²à¸„à¸²à¸—à¸­à¸‡: 1 à¸£à¸²à¸¢à¸à¸²à¸£`);
    console.log(`   ðŸ‘¥ à¸¥à¸¹à¸à¸„à¹‰à¸²: ${customers.length} à¸£à¸²à¸¢à¸à¸²à¸£`);
    console.log(`   ðŸšš à¸œà¸¹à¹‰à¸ªà¹ˆà¸‡à¸ªà¸´à¸™à¸„à¹‰à¸²: ${suppliers.length} à¸£à¸²à¸¢à¸à¸²à¸£`);
    console.log(`   ðŸ’ à¸ªà¸´à¸™à¸„à¹‰à¸²: ${products.length} à¸£à¸²à¸¢à¸à¸²à¸£`);
    
  } catch (error) {
    console.error('âŒ à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”:', error);
  } finally {
    await prisma.$disconnect();
  }
}

main()
  .catch((e) => {
    console.error(e);
    process.exit(1);
  }); 